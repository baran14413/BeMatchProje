{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/admin/layout.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, ReactNode } from 'react';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport { auth, db } from '@/lib/firebase';\nimport { onAuthStateChanged, User } from 'firebase/auth';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { Loader2, ShieldAlert } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport Link from 'next/link';\n\nexport default function AdminLayout({ children }: { children: ReactNode }) {\n  const [authStatus, setAuthStatus] = useState<'loading' | 'authorized' | 'unauthorized'>('loading');\n  const searchParams = useSearchParams();\n  const router = useRouter();\n\n  useEffect(() => {\n    const checkAuth = async (user: User | null) => {\n      const secretKey = searchParams.get('key');\n      const envKey = process.env.NEXT_PUBLIC_ADMIN_SECRET_KEY;\n\n      // Allow access if a valid secret key is provided in the URL\n      if (envKey && secretKey === envKey) {\n        setAuthStatus('authorized');\n        return;\n      }\n      \n      // If no secret key, check for admin role\n      if (user) {\n        try {\n          const userDocRef = doc(db, 'users', user.uid);\n          const userDoc = await getDoc(userDocRef);\n          if (userDoc.exists() && userDoc.data().isAdmin === true) {\n            setAuthStatus('authorized');\n          } else {\n            setAuthStatus('unauthorized');\n          }\n        } catch (error) {\n          console.error(\"Error checking admin status:\", error);\n          setAuthStatus('unauthorized');\n        }\n      } else {\n        setAuthStatus('unauthorized');\n      }\n    };\n\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      checkAuth(user);\n    });\n\n    return () => unsubscribe();\n  }, [searchParams]);\n\n  if (authStatus === 'loading') {\n    return (\n      <div className=\"flex h-screen w-full items-center justify-center bg-background\">\n        <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n        <p className=\"ml-4 text-lg\">Yetki kontrol ediliyor...</p>\n      </div>\n    );\n  }\n\n  if (authStatus === 'unauthorized') {\n    return (\n      <div className=\"flex h-screen w-full items-center justify-center bg-background p-4\">\n        <div className=\"text-center\">\n            <ShieldAlert className=\"mx-auto h-16 w-16 text-destructive mb-4\" />\n            <h1 className=\"text-2xl font-bold text-destructive\">Erişim Reddedildi</h1>\n            <p className=\"text-muted-foreground mt-2\">\n                Bu sayfayı görüntüleme yetkiniz yok.\n            </p>\n            <Button asChild className=\"mt-6\">\n                <Link href=\"/explore\">Ana Sayfaya Dön</Link>\n            </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4 sm:p-6 lg:p-8\">\n      <h1 className=\"text-3xl font-bold tracking-tight mb-6\">Admin Paneli</h1>\n      {children}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AATA;;;;;;;;;;AAWe,SAAS,YAAY,EAAE,QAAQ,EAA2B;IACvE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA6C;IACxF,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY,OAAO;YACvB,MAAM,YAAY,aAAa,GAAG,CAAC;YACnC,MAAM;YAEN,4DAA4D;YAC5D,IAAI,UAAU,cAAc,QAAQ;gBAClC,cAAc;gBACd;YACF;YAEA,yCAAyC;YACzC,IAAI,MAAM;gBACR,IAAI;oBACF,MAAM,aAAa,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,sHAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;oBAC5C,MAAM,UAAU,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE;oBAC7B,IAAI,QAAQ,MAAM,MAAM,QAAQ,IAAI,GAAG,OAAO,KAAK,MAAM;wBACvD,cAAc;oBAChB,OAAO;wBACL,cAAc;oBAChB;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,gCAAgC;oBAC9C,cAAc;gBAChB;YACF,OAAO;gBACL,cAAc;YAChB;QACF;QAEA,MAAM,cAAc,CAAA,GAAA,oPAAA,CAAA,qBAAkB,AAAD,EAAE,sHAAA,CAAA,OAAI,EAAE,CAAC;YAC5C,UAAU;QACZ;QAEA,OAAO,IAAM;IACf,GAAG;QAAC;KAAa;IAEjB,IAAI,eAAe,WAAW;QAC5B,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,iNAAA,CAAA,UAAO;oBAAC,WAAU;;;;;;8BACnB,8OAAC;oBAAE,WAAU;8BAAe;;;;;;;;;;;;IAGlC;IAEA,IAAI,eAAe,gBAAgB;QACjC,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,oNAAA,CAAA,cAAW;wBAAC,WAAU;;;;;;kCACvB,8OAAC;wBAAG,WAAU;kCAAsC;;;;;;kCACpD,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;kCAG1C,8OAAC,kIAAA,CAAA,SAAM;wBAAC,OAAO;wBAAC,WAAU;kCACtB,cAAA,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCAAW;;;;;;;;;;;;;;;;;;;;;;IAKpC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyC;;;;;;YACtD;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"file":"shield-alert.js","sources":["file:///home/user/studio/node_modules/lucide-react/src/icons/shield-alert.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z',\n      key: 'oel41y',\n    },\n  ],\n  ['path', { d: 'M12 8v4', key: '1got3b' }],\n  ['path', { d: 'M12 16h.01', key: '1drbdi' }],\n];\n\n/**\n * @component @name ShieldAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMTNjMCA1LTMuNSA3LjUtNy42NiA4Ljk1YTEgMSAwIDAgMS0uNjctLjAxQzcuNSAyMC41IDQgMTggNCAxM1Y2YTEgMSAwIDAgMSAxLTFjMiAwIDQuNS0xLjIgNi4yNC0yLjcyYTEuMTcgMS4xNyAwIDAgMSAxLjUyIDBDMTQuNTEgMy44MSAxNyA1IDE5IDVhMSAxIDAgMCAxIDEgMXoiIC8+CiAgPHBhdGggZD0iTTEyIDh2NCIgLz4KICA8cGF0aCBkPSJNMTIgMTZoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/shield-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShieldAlert = createLucideIcon('ShieldAlert', __iconNode);\n\nexport default ShieldAlert;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAuB,CAAA,CAAA,CAAA,CAAA;IAClC,CAAA;QACE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QACA,CAAA;YACE,CAAG,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YACH,CAAA,CAAA,CAAK,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QACP,CAAA;KACF,CAAA;IACA;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAW,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA,CAAA;IACxC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAc,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;CAC7C,CAAA;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,WAAA,CAAc,CAAA,wKAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAiB,AAAjB,CAAA,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAe,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","ignoreList":[0],"debugId":null}}]
}