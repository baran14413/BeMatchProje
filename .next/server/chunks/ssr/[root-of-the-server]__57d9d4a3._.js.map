{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase.ts"],"sourcesContent":["\nimport { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore, doc, setDoc, serverTimestamp as firestoreServerTimestamp, enableIndexedDbPersistence, CACHE_SIZE_UNLIMITED } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\nimport { getDatabase, ref, onValue, set, onDisconnect, serverTimestamp as rtdbServerTimestamp, goOffline, goOnline } from 'firebase/database';\nimport 'firebase/compat/firestore';\nimport firebase from 'firebase/compat/app';\n\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\n};\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\n\nif (!getApps().length) {\n    firebase.initializeApp(firebaseConfig);\n}\n\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst storage = getStorage(app);\nconst rtdb = getDatabase(app);\n\n\n// Enable offline persistence\nif (typeof window !== 'undefined') {\n    try {\n        enableIndexedDbPersistence(db, {\n            cacheSizeBytes: CACHE_SIZE_UNLIMITED\n        }).catch((err) => {\n            if (err.code == 'failed-precondition') {\n                // Multiple tabs open, persistence can only be enabled\n                // in one tab at a time.\n                console.warn('Firestore persistence failed: multiple tabs open.');\n            } else if (err.code == 'unimplemented') {\n                // The current browser does not support all of the\n                // features required to enable persistence\n                console.warn('Firestore persistence not available in this browser.');\n            }\n        });\n    } catch (error) {\n        console.error(\"Error enabling Firestore persistence:\", error);\n    }\n}\n\n\n// Presence management\nconst setupPresence = (userId: string) => {\n    const userStatusDatabaseRef = ref(rtdb, '/status/' + userId);\n    const userFirestoreRef = doc(db, 'users', userId);\n\n    const isOfflineForDatabase = {\n        isOnline: false,\n        lastSeen: rtdbServerTimestamp(),\n    };\n    \n    const isOnlineForDatabase = {\n        isOnline: true,\n    };\n    \n    const isOfflineForFirestore = {\n        isOnline: false,\n        lastSeen: firestoreServerTimestamp(),\n    };\n\n    const isOnlineForFirestore = {\n        isOnline: true,\n    };\n\n    const connectedRef = ref(rtdb, '.info/connected');\n    \n    const listener = onValue(connectedRef, (snap) => {\n        if (snap.val() === false) {\n            // Use setDoc with merge to avoid error if document doesn't exist yet\n            setDoc(userFirestoreRef, isOfflineForFirestore, { merge: true });\n            return;\n        }\n\n        onDisconnect(userStatusDatabaseRef).set(isOfflineForDatabase).then(() => {\n            set(userStatusDatabaseRef, isOnlineForDatabase);\n            // Use setDoc with merge here as well\n            setDoc(userFirestoreRef, isOnlineForFirestore, { merge: true });\n        });\n    });\n\n    const handleVisibilityChange = () => {\n        if (document.visibilityState === 'hidden') {\n            goOffline(rtdb);\n        } else {\n            goOnline(rtdb);\n        }\n    };\n    \n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    return () => {\n        document.removeEventListener('visibilitychange', handleVisibilityChange);\n        // Clean up the listener when it's no longer needed\n        // This is a placeholder as onValue returns an unsubscribe function directly\n    };\n};\n\n\nexport { app, auth, db, storage, setupPresence };\n"],"names":[],"mappings":";;;;;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;;;;;;;;AAGA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,aAAa,QAAQ,GAAG,CAAC,iCAAiC;IAC1D,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,oLAAA,CAAA,SAAM,AAAD;AAErE,IAAI,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,EAAE;IACnB,8KAAA,CAAA,UAAQ,CAAC,aAAa,CAAC;AAC3B;AAEA,MAAM,OAAO,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE;AACrB,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;AACxB,MAAM,UAAU,CAAA,GAAA,oLAAA,CAAA,aAAU,AAAD,EAAE;AAC3B,MAAM,OAAO,CAAA,GAAA,qLAAA,CAAA,cAAW,AAAD,EAAE;AAGzB,6BAA6B;AAC7B,uCAAmC;;AAkBnC;AAGA,sBAAsB;AACtB,MAAM,gBAAgB,CAAC;IACnB,MAAM,wBAAwB,CAAA,GAAA,qLAAA,CAAA,MAAG,AAAD,EAAE,MAAM,aAAa;IACrD,MAAM,mBAAmB,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,IAAI,SAAS;IAE1C,MAAM,uBAAuB;QACzB,UAAU;QACV,UAAU,CAAA,GAAA,qLAAA,CAAA,kBAAmB,AAAD;IAChC;IAEA,MAAM,sBAAsB;QACxB,UAAU;IACd;IAEA,MAAM,wBAAwB;QAC1B,UAAU;QACV,UAAU,CAAA,GAAA,iKAAA,CAAA,kBAAwB,AAAD;IACrC;IAEA,MAAM,uBAAuB;QACzB,UAAU;IACd;IAEA,MAAM,eAAe,CAAA,GAAA,qLAAA,CAAA,MAAG,AAAD,EAAE,MAAM;IAE/B,MAAM,WAAW,CAAA,GAAA,qLAAA,CAAA,UAAO,AAAD,EAAE,cAAc,CAAC;QACpC,IAAI,KAAK,GAAG,OAAO,OAAO;YACtB,qEAAqE;YACrE,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,kBAAkB,uBAAuB;gBAAE,OAAO;YAAK;YAC9D;QACJ;QAEA,CAAA,GAAA,qLAAA,CAAA,eAAY,AAAD,EAAE,uBAAuB,GAAG,CAAC,sBAAsB,IAAI,CAAC;YAC/D,CAAA,GAAA,qLAAA,CAAA,MAAG,AAAD,EAAE,uBAAuB;YAC3B,qCAAqC;YACrC,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,kBAAkB,sBAAsB;gBAAE,OAAO;YAAK;QACjE;IACJ;IAEA,MAAM,yBAAyB;QAC3B,IAAI,SAAS,eAAe,KAAK,UAAU;YACvC,CAAA,GAAA,qLAAA,CAAA,YAAS,AAAD,EAAE;QACd,OAAO;YACH,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;QACb;IACJ;IAEA,SAAS,gBAAgB,CAAC,oBAAoB;IAE9C,OAAO;QACH,SAAS,mBAAmB,CAAC,oBAAoB;IACjD,mDAAmD;IACnD,4EAA4E;IAChF;AACJ","debugId":null}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/progress.tsx"],"sourcesContent":["\n\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root> & { indicatorClassName?: string }\n>(({ className, value, indicatorClassName, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className={cn(\"h-full w-full flex-1 bg-primary transition-all\", indicatorClassName)}\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n"],"names":[],"mappings":";;;;AAGA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,kBAAkB,EAAE,GAAG,OAAO,EAAE,oBACrD,8OAAC,oKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oKAAA,CAAA,YAA2B;YAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;YAChE,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,oKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { onAuthStateChanged, User } from 'firebase/auth';\nimport { auth, db } from '@/lib/firebase';\nimport { Progress } from '@/components/ui/progress';\nimport { doc, getDoc } from 'firebase/firestore';\n\nconst initialMessages = [\n    \"Bağlantı kuruluyor...\",\n    \"Güvenlik kontrolü yapılıyor...\",\n    \"Oturum doğrulanıyor...\",\n    \"Her şeyi profesyonel hale getiriyoruz...\",\n    \"Neredeyse hazır!\",\n];\n\nconst SplashScreen = ({ messages }: { messages: string[] }) => {\n    const [progress, setProgress] = useState(0);\n    const [messageIndex, setMessageIndex] = useState(0);\n\n    useEffect(() => {\n        const progressInterval = setInterval(() => {\n            setProgress(prev => (prev >= 100 ? 100 : prev + 5));\n        }, 100); \n\n        const messageInterval = setInterval(() => {\n            setMessageIndex(prev => {\n                // If it's the last message, don't cycle back\n                if (prev === messages.length - 1) {\n                    clearInterval(messageInterval);\n                    return prev;\n                }\n                return (prev + 1) % messages.length;\n            });\n        }, 1200);\n\n        return () => {\n            clearInterval(progressInterval);\n            clearInterval(messageInterval);\n        };\n    }, [messages.length]);\n\n    return (\n        <div className=\"flex flex-col items-center justify-center gap-8 w-full max-w-sm text-center\">\n            <h1 className=\"text-6xl font-bold font-headline tracking-tighter animate-beat\">\n                <span className=\"text-blue-500\">Be</span>\n                <span className=\"text-primary\">Match</span>\n            </h1>\n            <div className='w-full space-y-2'>\n                <p className=\"text-sm text-muted-foreground transition-opacity duration-500\">{messages[messageIndex]}</p>\n                <Progress value={progress} className=\"w-full h-1.5\" indicatorClassName=\"bg-gradient-to-r from-blue-500 to-primary\"/>\n            </div>\n        </div>\n    );\n};\n\nexport default function Home() {\n    const router = useRouter();\n    const [loadingMessages, setLoadingMessages] = useState(initialMessages);\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, async (user: User | null) => {\n            if (user) {\n                try {\n                    const userDoc = await getDoc(doc(db, 'users', user.uid));\n                    if (userDoc.exists()) {\n                        const userData = userDoc.data();\n                        // Update the loading message with the user's name\n                        setLoadingMessages(prev => [...prev, `${userData.name}, hoş geldin!`]);\n                        \n                        // Wait a moment for the welcome message to be visible, then redirect\n                        setTimeout(() => {\n                            router.replace('/explore');\n                        }, 1500); // Show welcome message for 1.5 seconds\n\n                    } else {\n                        // User exists in Auth, but not in Firestore. Redirect to login to be safe.\n                         setTimeout(() => router.replace('/login'), 1000);\n                    }\n                } catch (error) {\n                    console.error(\"Error fetching user data, redirecting to login\", error);\n                    setTimeout(() => router.replace('/login'), 1000);\n                }\n            } else {\n                // No user, redirect to login after a short delay to allow splash to show\n                setTimeout(() => {\n                    router.replace('/login');\n                }, 2000);\n            }\n        });\n\n        // Cleanup the subscription when the component unmounts\n        return () => unsubscribe();\n    }, [router]);\n\n    return (\n        <main className=\"flex min-h-screen flex-col items-center justify-center bg-background p-8 relative\">\n            <div className=\"flex-1 flex items-center justify-center\">\n                <SplashScreen messages={loadingMessages} />\n            </div>\n            <div className=\"absolute bottom-8 flex flex-col items-center gap-1\">\n                <p className=\"text-xs font-light text-muted-foreground tracking-wider\">Created By</p>\n                <span className=\"font-bold text-lg tracking-widest\">\n                    <span className=\"text-blue-500\">B</span>E\n                </span>\n            </div>\n        </main>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}