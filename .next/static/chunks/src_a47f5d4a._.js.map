{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase.ts"],"sourcesContent":["\nimport { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore, doc, setDoc, serverTimestamp as firestoreServerTimestamp, enableIndexedDbPersistence, CACHE_SIZE_UNLIMITED } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\nimport { getDatabase, ref, onValue, set, onDisconnect, serverTimestamp as rtdbServerTimestamp, goOffline, goOnline } from 'firebase/database';\nimport 'firebase/compat/firestore';\nimport firebase from 'firebase/compat/app';\n\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\n};\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\n\nif (!getApps().length) {\n    firebase.initializeApp(firebaseConfig);\n}\n\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst storage = getStorage(app);\nconst rtdb = getDatabase(app);\n\n\n// Enable offline persistence\nif (typeof window !== 'undefined') {\n    try {\n        enableIndexedDbPersistence(db, {\n            cacheSizeBytes: CACHE_SIZE_UNLIMITED\n        }).catch((err) => {\n            if (err.code == 'failed-precondition') {\n                // Multiple tabs open, persistence can only be enabled\n                // in one tab at a time.\n                console.warn('Firestore persistence failed: multiple tabs open.');\n            } else if (err.code == 'unimplemented') {\n                // The current browser does not support all of the\n                // features required to enable persistence\n                console.warn('Firestore persistence not available in this browser.');\n            }\n        });\n    } catch (error) {\n        console.error(\"Error enabling Firestore persistence:\", error);\n    }\n}\n\n\n// Presence management\nconst setupPresence = (userId: string) => {\n    const userStatusDatabaseRef = ref(rtdb, '/status/' + userId);\n    const userFirestoreRef = doc(db, 'users', userId);\n\n    const isOfflineForDatabase = {\n        isOnline: false,\n        lastSeen: rtdbServerTimestamp(),\n    };\n    \n    const isOnlineForDatabase = {\n        isOnline: true,\n    };\n    \n    const isOfflineForFirestore = {\n        isOnline: false,\n        lastSeen: firestoreServerTimestamp(),\n    };\n\n    const isOnlineForFirestore = {\n        isOnline: true,\n    };\n\n    const connectedRef = ref(rtdb, '.info/connected');\n    \n    const listener = onValue(connectedRef, (snap) => {\n        if (snap.val() === false) {\n            // Use setDoc with merge to avoid error if document doesn't exist yet\n            setDoc(userFirestoreRef, isOfflineForFirestore, { merge: true });\n            return;\n        }\n\n        onDisconnect(userStatusDatabaseRef).set(isOfflineForDatabase).then(() => {\n            set(userStatusDatabaseRef, isOnlineForDatabase);\n            // Use setDoc with merge here as well\n            setDoc(userFirestoreRef, isOnlineForFirestore, { merge: true });\n        });\n    });\n\n    const handleVisibilityChange = () => {\n        if (document.visibilityState === 'hidden') {\n            goOffline(rtdb);\n        } else {\n            goOnline(rtdb);\n        }\n    };\n    \n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    return () => {\n        document.removeEventListener('visibilitychange', handleVisibilityChange);\n        // Clean up the listener when it's no longer needed\n        // This is a placeholder as onValue returns an unsubscribe function directly\n    };\n};\n\n\nexport { app, auth, db, storage, setupPresence };\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { onAuthStateChanged, User } from 'firebase/auth';\nimport { auth, db } from '@/lib/firebase';\nimport { doc, getDoc } from 'firebase/firestore';\n\nconst LoadingDots = () => (\n    <div className=\"flex items-center justify-center gap-1\">\n        <span>YÃ¼kleniyor</span>\n        <span className=\"animate-ellipsis-dot\">.</span>\n        <span className=\"animate-ellipsis-dot\">.</span>\n        <span className=\"animate-ellipsis-dot\">.</span>\n    </div>\n);\n\n\nconst SplashScreen = () => {\n    return (\n        <div className=\"flex flex-col items-center justify-center gap-8 w-full max-w-sm text-center\">\n            <h1 className=\"text-6xl font-bold font-headline tracking-tighter animate-beat\">\n                <span className=\"text-blue-500\">Be</span>\n                <span className=\"text-primary\">Match</span>\n            </h1>\n            <div className='w-full space-y-2'>\n                <video \n                    src=\"/videos/Loading 40 _ Paperplane.mp4\" \n                    autoPlay \n                    loop \n                    muted \n                    playsInline \n                    width=\"150\" \n                    height=\"150\"\n                    className=\"mx-auto\"\n                />\n                 <div className=\"text-sm text-muted-foreground transition-opacity duration-500 h-5\">\n                    <LoadingDots />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default function Home() {\n    const router = useRouter();\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, async (user: User | null) => {\n            // Give splash screen a minimum time to display\n            await new Promise(resolve => setTimeout(resolve, 3000));\n            \n            if (user) {\n                try {\n                    const userDoc = await getDoc(doc(db, 'users', user.uid));\n                    if (userDoc.exists()) {\n                        router.replace('/explore');\n                    } else {\n                         setTimeout(() => router.replace('/login'), 1000);\n                    }\n                } catch (error) {\n                    console.error(\"Error fetching user data, redirecting to login\", error);\n                    setTimeout(() => router.replace('/login'), 1000);\n                }\n            } else {\n                setTimeout(() => {\n                    router.replace('/login');\n                }, 2000);\n            }\n        });\n\n        return () => unsubscribe();\n    }, [router]);\n\n    return (\n        <main className=\"flex min-h-screen flex-col items-center justify-center bg-background p-8 relative\">\n            <div className=\"flex-1 flex items-center justify-center\">\n                <SplashScreen />\n            </div>\n            <div className=\"absolute bottom-8 flex flex-col items-center gap-1\">\n                <p className=\"text-xs font-light text-muted-foreground tracking-wider\">Created By</p>\n                <span className=\"font-bold text-lg tracking-widest\">\n                    <span className=\"text-blue-500\">B</span>E\n                </span>\n            </div>\n        </main>\n    );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AAAA;AACA;AACA;AAAA;;;AANA;;;;;;AAQA,MAAM,cAAc,kBAChB,6LAAC;QAAI,WAAU;;0BACX,6LAAC;0BAAK;;;;;;0BACN,6LAAC;gBAAK,WAAU;0BAAuB;;;;;;0BACvC,6LAAC;gBAAK,WAAU;0BAAuB;;;;;;0BACvC,6LAAC;gBAAK,WAAU;0BAAuB;;;;;;;;;;;;KALzC;AAUN,MAAM,eAAe;IACjB,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;;kCACV,6LAAC;wBAAK,WAAU;kCAAgB;;;;;;kCAChC,6LAAC;wBAAK,WAAU;kCAAe;;;;;;;;;;;;0BAEnC,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,KAAI;wBACJ,QAAQ;wBACR,IAAI;wBACJ,KAAK;wBACL,WAAW;wBACX,OAAM;wBACN,QAAO;wBACP,WAAU;;;;;;kCAEb,6LAAC;wBAAI,WAAU;kCACZ,cAAA,6LAAC;;;;;;;;;;;;;;;;;;;;;;AAKrB;MAxBM;AA0BS,SAAS;;IACpB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0BAAE;YACN,MAAM,cAAc,CAAA,GAAA,oPAAA,CAAA,qBAAkB,AAAD,EAAE,yHAAA,CAAA,OAAI;8CAAE,OAAO;oBAChD,+CAA+C;oBAC/C,MAAM,IAAI;sDAAQ,CAAA,UAAW,WAAW,SAAS;;oBAEjD,IAAI,MAAM;wBACN,IAAI;4BACA,MAAM,UAAU,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,yHAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;4BACtD,IAAI,QAAQ,MAAM,IAAI;gCAClB,OAAO,OAAO,CAAC;4BACnB,OAAO;gCACF;kEAAW,IAAM,OAAO,OAAO,CAAC;iEAAW;4BAChD;wBACJ,EAAE,OAAO,OAAO;4BACZ,QAAQ,KAAK,CAAC,kDAAkD;4BAChE;8DAAW,IAAM,OAAO,OAAO,CAAC;6DAAW;wBAC/C;oBACJ,OAAO;wBACH;0DAAW;gCACP,OAAO,OAAO,CAAC;4BACnB;yDAAG;oBACP;gBACJ;;YAEA;kCAAO,IAAM;;QACjB;yBAAG;QAAC;KAAO;IAEX,qBACI,6LAAC;QAAK,WAAU;;0BACZ,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;;;;;;;;;;0BAEL,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAE,WAAU;kCAA0D;;;;;;kCACvE,6LAAC;wBAAK,WAAU;;0CACZ,6LAAC;gCAAK,WAAU;0CAAgB;;;;;;4BAAQ;;;;;;;;;;;;;;;;;;;AAK5D;GA3CwB;;QACL,qIAAA,CAAA,YAAS;;;MADJ","debugId":null}}]
}